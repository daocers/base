rocketmq 集群搭建

1 采用两主两备，异步刷盘
2 nameserver两台集群

步骤：
1 根据需要修改配置文件，主要修改brokerName和brokerId, flushDiskType几个配置项。
    其他信息根据需要进行处理。
2 在两台机器上启动
    1） 启动nameServer   nohup sh mqnamesrv 1>/logs/rocketmq/namesrv.log 2>/logs/rocketmq/namesrv-error.log &
    2) 启动broker， nohup sh mqbroker -n 192.168.1.1:9876 
    -c /usr/program/rocketmq/conf/broker-a.properties > /logs/rocketmq/broker.log &
    3) 启动broker slave， nohup sh mqbroker -n 192.168.1.1:9876
    -c /usr/program/rocketmq/conf/broker-a-s.properties > /logs/rocketmq/broker.log &

3 查看是否有BrokerStartup , NamesrvStartup进行，如果有则启动成功




关停服务：
sh mqshutdown namesrv
sh mqshutdown broker


常用命令：
--查看所有消费组group
sh mqadmin consumerProgress -n 192.168.1.1:9876
--查看指定消费组下所有的topic的数据堆积情况
sh mqadmin consumerProgress -n 192.168.1.1:9876 -g myProducer
--查看指定报文信息
sh mqadmin queryMsgById -n 192.168.1.1:9876 -i caoa09080800000000(表示MSG_ID)
--查看topic列表信息
sh mqadmin topicList -n 192.168.1.1:9876
--查看topic信息列表详情统计
sh mqadmin topicStatus -n 192.168.1.1:9876 -t Topic
--查看集群消息
sh mqadmin clusterList -n 192.168.1.1:9876
